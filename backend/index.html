<!doctype html>
<html lang="en" dir="ltr"
   class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-get_started/quickstart"
   data-has-hydrated="false">

<head>
   <meta charset="UTF-8">
   <meta name="generator" content="Docusaurus v2.4.3">
   <title data-rh="true">Quickstart | ü¶úÔ∏èüîó Langchain</title>
   <meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1">
   <meta data-rh="true" name="twitter:card" content="summary_large_image">
   <meta data-rh="true" property="og:image" content="https://python.langchain.com/img/parrot-chainlink-icon.png">
   <meta data-rh="true" name="twitter:image" content="https://python.langchain.com/img/parrot-chainlink-icon.png">
   <meta data-rh="true" property="og:url" content="https://python.langchain.com/docs/get_started/quickstart">
   <meta data-rh="true" name="docusaurus_locale" content="en">
   <meta data-rh="true" name="docsearch:language" content="en">
   <meta data-rh="true" name="docusaurus_version" content="current">
   <meta data-rh="true" name="docusaurus_tag" content="docs-default-current">
   <meta data-rh="true" name="docsearch:version" content="current">
   <meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current">
   <meta data-rh="true" property="og:title" content="Quickstart | ü¶úÔ∏èüîó Langchain">
   <meta data-rh="true" name="description" content="In this quickstart we&#x27;ll show you how to:">
   <meta data-rh="true" property="og:description" content="In this quickstart we&#x27;ll show you how to:">
   <link data-rh="true" rel="icon" href="/img/favicon.ico">
   <link data-rh="true" rel="canonical" href="https://python.langchain.com/docs/get_started/quickstart">
   <link data-rh="true" rel="alternate" href="https://python.langchain.com/docs/get_started/quickstart" hreflang="en">
   <link data-rh="true" rel="alternate" href="https://python.langchain.com/docs/get_started/quickstart"
      hreflang="x-default">
   <link data-rh="true" rel="preconnect" href="https://VAU016LAWS-dsn.algolia.net" crossorigin="anonymous">
   <link rel="search" type="application/opensearchdescription+xml" title="ü¶úÔ∏èüîó Langchain" href="/opensearch.xml">


   <script src="/js/google_analytics.js"></script>
   <script src="https://www.googletagmanager.com/gtag/js?id=G-9B66JQQH2F" async></script>
   <link rel="stylesheet" href="/assets/css/styles.48c66593.css">
   <link rel="preload" href="/assets/js/runtime~main.4eb2bc1e.js" as="script">
   <link rel="preload" href="/assets/js/main.16c4cdcb.js" as="script">
</head>

<body class="navigation-with-keyboard">
   <script>!function () { function e(e) { document.documentElement.setAttribute("data-theme", e) } var t = function () { var e = null; try { e = new URLSearchParams(window.location.search).get("docusaurus-theme") } catch (e) { } return e }() || function () { var e = null; try { e = localStorage.getItem("theme") } catch (e) { } return e }(); null !== t ? e(t) : window.matchMedia("(prefers-color-scheme: dark)").matches ? e("dark") : (window.matchMedia("(prefers-color-scheme: light)").matches, e("light")) }()</script>
   <div id="__docusaurus">
      <div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn"
            href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div>
      <nav aria-label="Main" class="navbar navbar--fixed-top">
         <div class="navbar__inner">
            <div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false"
                  class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30"
                     aria-hidden="true">
                     <path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"
                        d="M4 7h22M4 15h22M4 23h22"></path>
                  </svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">ü¶úÔ∏èüîó
                     LangChain</b></a><a class="navbar__item navbar__link"
                  href="/docs/get_started/introduction">Docs</a><a class="navbar__item navbar__link"
                  href="/docs/use_cases">Use cases</a><a class="navbar__item navbar__link"
                  href="/docs/integrations/platforms/">Integrations</a><a class="navbar__item navbar__link"
                  href="/docs/guides/debugging">Guides</a><a href="https://api.python.langchain.com" target="_blank"
                  rel="noopener noreferrer" class="navbar__item navbar__link">API<svg width="13.5" height="13.5"
                     aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU">
                     <path fill="currentColor"
                        d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z">
                     </path>
                  </svg></a>
               <div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true"
                     aria-expanded="false" role="button" class="navbar__link">More</a>
                  <ul class="dropdown__menu">
                     <li><a class="dropdown__link" href="/docs/packages">Versioning</a></li>
                     <li><a class="dropdown__link" href="/docs/changelog">Changelog</a></li>
                     <li><a class="dropdown__link" href="/docs/contributing">Developer&#x27;s guide</a></li>
                     <li><a class="dropdown__link" href="/docs/templates/">Templates</a></li>
                     <li><a href="https://github.com/langchain-ai/langchain/blob/master/cookbook/README.md"
                           target="_blank" rel="noopener noreferrer" class="dropdown__link">Cookbooks<svg width="12"
                              height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU">
                              <path fill="currentColor"
                                 d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z">
                              </path>
                           </svg></a></li>
                     <li><a class="dropdown__link" href="/docs/additional_resources/tutorials">Tutorials</a></li>
                     <li><a class="dropdown__link" href="/docs/additional_resources/youtube">YouTube videos</a></li>
                  </ul>
               </div>
            </div>
            <div class="navbar__items navbar__items--right">
               <div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true"
                     aria-expanded="false" role="button" class="navbar__link">ü¶úÔ∏èüîó</a>
                  <ul class="dropdown__menu">
                     <li><a href="https://smith.langchain.com" target="_blank" rel="noopener noreferrer"
                           class="dropdown__link">LangSmith<svg width="12" height="12" aria-hidden="true"
                              viewBox="0 0 24 24" class="iconExternalLink_nPIU">
                              <path fill="currentColor"
                                 d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z">
                              </path>
                           </svg></a></li>
                     <li><a href="https://docs.smith.langchain.com/" target="_blank" rel="noopener noreferrer"
                           class="dropdown__link">LangSmith Docs<svg width="12" height="12" aria-hidden="true"
                              viewBox="0 0 24 24" class="iconExternalLink_nPIU">
                              <path fill="currentColor"
                                 d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z">
                              </path>
                           </svg></a></li>
                     <li><a href="https://github.com/langchain-ai/langserve" target="_blank" rel="noopener noreferrer"
                           class="dropdown__link">LangServe GitHub<svg width="12" height="12" aria-hidden="true"
                              viewBox="0 0 24 24" class="iconExternalLink_nPIU">
                              <path fill="currentColor"
                                 d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z">
                              </path>
                           </svg></a></li>
                     <li><a href="https://github.com/langchain-ai/langchain/tree/master/templates" target="_blank"
                           rel="noopener noreferrer" class="dropdown__link">Templates GitHub<svg width="12" height="12"
                              aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU">
                              <path fill="currentColor"
                                 d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z">
                              </path>
                           </svg></a></li>
                     <li><a href="https://templates.langchain.com" target="_blank" rel="noopener noreferrer"
                           class="dropdown__link">Templates Hub<svg width="12" height="12" aria-hidden="true"
                              viewBox="0 0 24 24" class="iconExternalLink_nPIU">
                              <path fill="currentColor"
                                 d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z">
                              </path>
                           </svg></a></li>
                     <li><a href="https://smith.langchain.com/hub" target="_blank" rel="noopener noreferrer"
                           class="dropdown__link">LangChain Hub<svg width="12" height="12" aria-hidden="true"
                              viewBox="0 0 24 24" class="iconExternalLink_nPIU">
                              <path fill="currentColor"
                                 d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z">
                              </path>
                           </svg></a></li>
                     <li><a href="https://js.langchain.com" target="_blank" rel="noopener noreferrer"
                           class="dropdown__link">JS/TS Docs<svg width="12" height="12" aria-hidden="true"
                              viewBox="0 0 24 24" class="iconExternalLink_nPIU">
                              <path fill="currentColor"
                                 d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z">
                              </path>
                           </svg></a></li>
                  </ul>
               </div><a href="https://chat.langchain.com" target="_blank" rel="noopener noreferrer"
                  class="navbar__item navbar__link">Chat<svg width="13.5" height="13.5" aria-hidden="true"
                     viewBox="0 0 24 24" class="iconExternalLink_nPIU">
                     <path fill="currentColor"
                        d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z">
                     </path>
                  </svg></a><a href="https://github.com/langchain-ai/langchain" target="_blank"
                  rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"
                  aria-label="GitHub repository"></a>
               <div class="toggle_vylO colorModeToggle_DEke"><button
                     class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled=""
                     title="Switch between dark and light mode (currently light mode)"
                     aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg
                        viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR">
                        <path fill="currentColor"
                           d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z">
                        </path>
                     </svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR">
                        <path fill="currentColor"
                           d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z">
                        </path>
                     </svg></button></div>
               <div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button"
                     aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20"
                           class="DocSearch-Search-Icon" viewBox="0 0 20 20">
                           <path
                              d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z"
                              stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round"
                              stroke-linejoin="round"></path>
                        </svg><span class="DocSearch-Button-Placeholder">Search</span></span><span
                        class="DocSearch-Button-Keys"></span></button></div>
            </div>
         </div>
         <div role="presentation" class="navbar-sidebar__backdrop"></div>
      </nav>
      <div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button
            aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU"
            type="button"></button>
         <div class="docPage__5DB">
            <aside class="theme-doc-sidebar-container docSidebarContainer_b6E3">
               <div class="sidebarViewport_Xe31">
                  <div class="sidebar_njMd">
                     <nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG">
                        <ul class="theme-doc-sidebar-menu menu__list">
                           <li
                              class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item">
                              <div class="menu__list-item-collapsible"><a class="menu__link menu__link--active"
                                    href="/docs/get_started">Get started</a></div>
                              <ul style="display:block;overflow:visible;height:auto" class="menu__list">
                                 <li
                                    class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                    <a class="menu__link" tabindex="0"
                                       href="/docs/get_started/introduction">Introduction</a></li>
                                 <li
                                    class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                    <a class="menu__link" tabindex="0"
                                       href="/docs/get_started/installation">Installation</a></li>
                                 <li
                                    class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                    <a class="menu__link menu__link--active" aria-current="page" tabindex="0"
                                       href="/docs/get_started/quickstart">Quickstart</a></li>
                                 <li
                                    class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                    <a class="menu__link" tabindex="0" href="/docs/security">Security</a></li>
                              </ul>
                           </li>
                           <li
                              class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item">
                              <div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist"
                                    aria-expanded="true" href="/docs/expression_language/">LangChain Expression
                                    Language</a><button
                                    aria-label="Toggle the collapsible sidebar category &#x27;LangChain Expression Language&#x27;"
                                    type="button" class="clean-btn menu__caret"></button></div>
                              <ul style="display:block;overflow:visible;height:auto" class="menu__list">
                                 <li
                                    class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                    <a class="menu__link" tabindex="0" href="/docs/expression_language/get_started">Get
                                       started</a></li>
                                 <li
                                    class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                    <a class="menu__link" tabindex="0" href="/docs/expression_language/why">Why use
                                       LCEL</a></li>
                                 <li
                                    class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                    <a class="menu__link" tabindex="0"
                                       href="/docs/expression_language/interface">Interface</a></li>
                                 <li
                                    class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                    <a class="menu__link" tabindex="0"
                                       href="/docs/expression_language/streaming">Streaming</a></li>
                                 <li
                                    class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed">
                                    <div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist"
                                          aria-expanded="false" tabindex="0"
                                          href="/docs/expression_language/how_to/">How to</a><button
                                          aria-label="Toggle the collapsible sidebar category &#x27;How to&#x27;"
                                          type="button" class="clean-btn menu__caret"></button></div>
                                 </li>
                                 <li
                                    class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed">
                                    <div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist"
                                          aria-expanded="false" tabindex="0"
                                          href="/docs/expression_language/cookbook/">Cookbook</a><button
                                          aria-label="Toggle the collapsible sidebar category &#x27;Cookbook&#x27;"
                                          type="button" class="clean-btn menu__caret"></button></div>
                                 </li>
                                 <li
                                    class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item hidden">
                                    <a class="menu__link" tabindex="0" href="/docs/expression_language/">LangChain
                                       Expression Language (LCEL)</a></li>
                              </ul>
                           </li>
                           <li
                              class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item">
                              <div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist"
                                    aria-expanded="true" href="/docs/modules/">Modules</a><button
                                    aria-label="Toggle the collapsible sidebar category &#x27;Modules&#x27;"
                                    type="button" class="clean-btn menu__caret"></button></div>
                              <ul style="display:block;overflow:visible;height:auto" class="menu__list">
                                 <li
                                    class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed">
                                    <div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist"
                                          aria-expanded="false" tabindex="0" href="/docs/modules/model_io/">Model
                                          I/O</a><button
                                          aria-label="Toggle the collapsible sidebar category &#x27;Model I/O&#x27;"
                                          type="button" class="clean-btn menu__caret"></button></div>
                                 </li>
                                 <li
                                    class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed">
                                    <div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist"
                                          aria-expanded="false" tabindex="0"
                                          href="/docs/modules/data_connection/">Retrieval</a><button
                                          aria-label="Toggle the collapsible sidebar category &#x27;Retrieval&#x27;"
                                          type="button" class="clean-btn menu__caret"></button></div>
                                 </li>
                                 <li
                                    class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed">
                                    <div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist"
                                          aria-expanded="false" tabindex="0"
                                          href="/docs/modules/agents/">Agents</a><button
                                          aria-label="Toggle the collapsible sidebar category &#x27;Agents&#x27;"
                                          type="button" class="clean-btn menu__caret"></button></div>
                                 </li>
                                 <li
                                    class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                    <a class="menu__link" tabindex="0" href="/docs/modules/chains">Chains</a></li>
                                 <li
                                    class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed">
                                    <div class="menu__list-item-collapsible"><a
                                          class="menu__link menu__link--sublist menu__link--sublist-caret"
                                          aria-expanded="false" tabindex="0" href="/docs/modules/memory/">More</a></div>
                                 </li>
                              </ul>
                           </li>
                           <li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item">
                              <a class="menu__link" href="/docs/langserve">LangServe</a></li>
                           <li
                              class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed">
                              <div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist"
                                    aria-expanded="false" href="/docs/langsmith/">LangSmith</a><button
                                    aria-label="Toggle the collapsible sidebar category &#x27;LangSmith&#x27;"
                                    type="button" class="clean-btn menu__caret"></button></div>
                           </li>
                           <li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item">
                              <a class="menu__link" href="/docs/langgraph">LangGraph</a></li>
                        </ul>
                     </nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar"
                        class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20"
                           height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_">
                           <g fill="#7a7a7a">
                              <path
                                 d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0">
                              </path>
                              <path
                                 d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0">
                              </path>
                           </g>
                        </svg></button>
                  </div>
               </div>
            </aside>
            <main class="docMainContainer_gTbr">
               <div class="container padding-top--md padding-bottom--lg">
                  <div class="row">
                     <div class="col docItemCol_VOVn">
                        <div class="docItemContainer_Djhp">
                           <article>
                              <nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs">
                                 <ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList">
                                    <li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link"
                                          href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT">
                                             <path
                                                d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z"
                                                fill="currentColor"></path>
                                          </svg></a></li>
                                    <li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem"
                                       class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item"
                                          href="/docs/get_started"><span itemprop="name">Get started</span></a>
                                       <meta itemprop="position" content="1">
                                    </li>
                                    <li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem"
                                       class="breadcrumbs__item breadcrumbs__item--active"><span
                                          class="breadcrumbs__link" itemprop="name">Quickstart</span>
                                       <meta itemprop="position" content="2">
                                    </li>
                                 </ul>
                              </nav>
                              <div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button"
                                    class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div>
                              <div class="theme-doc-markdown markdown">
                                 <h1>Quickstart</h1>
                                 <p>In this quickstart we&#x27;ll show you how to:</p>
                                 <ul>
                                    <li>Get setup with LangChain, LangSmith and LangServe</li>
                                    <li>Use the most basic and common components of LangChain: prompt templates, models,
                                       and output parsers</li>
                                    <li>Use LangChain Expression Language, the protocol that LangChain is built on and
                                       which facilitates component chaining</li>
                                    <li>Build a simple application with LangChain</li>
                                    <li>Trace your application with LangSmith</li>
                                    <li>Serve your application with LangServe</li>
                                 </ul>
                                 <p>That&#x27;s a fair amount to cover! Let&#x27;s dive in.</p>
                                 <h2 class="anchor anchorWithStickyNavbar_LWe7" id="setup">Setup<a href="#setup"
                                       class="hash-link" aria-label="Direct link to Setup"
                                       title="Direct link to Setup">‚Äã</a></h2>
                                 <h3 class="anchor anchorWithStickyNavbar_LWe7" id="jupyter-notebook">Jupyter Notebook<a
                                       href="#jupyter-notebook" class="hash-link"
                                       aria-label="Direct link to Jupyter Notebook"
                                       title="Direct link to Jupyter Notebook">‚Äã</a></h3>
                                 <p>This guide (and most of the other guides in the documentation) use <a
                                       href="https://jupyter.org/" target="_blank" rel="noopener noreferrer">Jupyter
                                       notebooks</a> and assume the reader is as well. Jupyter notebooks are perfect for
                                    learning how to work with LLM systems because often times things can go wrong
                                    (unexpected output, API down, etc) and going through guides in an interactive
                                    environment is a great way to better understand them.</p>
                                 <p>You do not NEED to go through the guide in a Jupyter Notebook, but it is
                                    recommended. See <a href="https://jupyter.org/install" target="_blank"
                                       rel="noopener noreferrer">here</a> for instructions on how to install.</p>
                                 <h3 class="anchor anchorWithStickyNavbar_LWe7" id="installation">Installation<a
                                       href="#installation" class="hash-link" aria-label="Direct link to Installation"
                                       title="Direct link to Installation">‚Äã</a></h3>
                                 <p>To install LangChain run:</p>
                                 <div class="tabs-container tabList__CuJ">
                                    <ul role="tablist" aria-orientation="horizontal" class="tabs">
                                       <li role="tab" tabindex="0" aria-selected="true"
                                          class="tabs__item tabItem_LNqP tabs__item--active">Pip</li>
                                       <li role="tab" tabindex="-1" aria-selected="false"
                                          class="tabs__item tabItem_LNqP">Conda</li>
                                    </ul>
                                    <div class="margin-top--md">
                                       <div role="tabpanel" class="tabItem_Ymn6">
                                          <div class="language-bash codeBlockContainer_Ckt0 theme-code-block"
                                             style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                             <div class="codeBlockContent_biex">
                                                <pre tabindex="0"
                                                   class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">pip </span><span class="token function" style="color:rgb(0, 0, 255)">install</span><span class="token plain"> langchain</span><br></span></code></pre>
                                                <div class="buttonGroup__atx"><button type="button"
                                                      aria-label="Copy code to clipboard" title="Copy"
                                                      class="clean-btn"><span class="copyButtonIcons_eSgA"
                                                         aria-hidden="true"><svg viewBox="0 0 24 24"
                                                            class="copyButtonIcon_y97N">
                                                            <path fill="currentColor"
                                                               d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                            </path>
                                                         </svg><svg viewBox="0 0 24 24"
                                                            class="copyButtonSuccessIcon_LjdS">
                                                            <path fill="currentColor"
                                                               d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                            </path>
                                                         </svg></span></button></div>
                                             </div>
                                          </div>
                                       </div>
                                       <div role="tabpanel" class="tabItem_Ymn6" hidden="">
                                          <div class="language-bash codeBlockContainer_Ckt0 theme-code-block"
                                             style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                             <div class="codeBlockContent_biex">
                                                <pre tabindex="0"
                                                   class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">conda </span><span class="token function" style="color:rgb(0, 0, 255)">install</span><span class="token plain"> langchain -c conda-forge</span><br></span></code></pre>
                                                <div class="buttonGroup__atx"><button type="button"
                                                      aria-label="Copy code to clipboard" title="Copy"
                                                      class="clean-btn"><span class="copyButtonIcons_eSgA"
                                                         aria-hidden="true"><svg viewBox="0 0 24 24"
                                                            class="copyButtonIcon_y97N">
                                                            <path fill="currentColor"
                                                               d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                            </path>
                                                         </svg><svg viewBox="0 0 24 24"
                                                            class="copyButtonSuccessIcon_LjdS">
                                                            <path fill="currentColor"
                                                               d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                            </path>
                                                         </svg></span></button></div>
                                             </div>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                                 <p>For more details, see our <a href="/docs/get_started/installation">Installation
                                       guide</a>.</p>
                                 <h3 class="anchor anchorWithStickyNavbar_LWe7" id="langsmith">LangSmith<a
                                       href="#langsmith" class="hash-link" aria-label="Direct link to LangSmith"
                                       title="Direct link to LangSmith">‚Äã</a></h3>
                                 <p>Many of the applications you build with LangChain will contain multiple steps with
                                    multiple invocations of LLM calls.
                                    As these applications get more and more complex, it becomes crucial to be able to
                                    inspect what exactly is going on inside your chain or agent.
                                    The best way to do this is with <a href="https://smith.langchain.com"
                                       target="_blank" rel="noopener noreferrer">LangSmith</a>.</p>
                                 <p>Note that LangSmith is not needed, but it is helpful.
                                    If you do want to use LangSmith, after you sign up at the link above, make sure to
                                    set your environment variables to start logging traces:</p>
                                 <div class="language-shell codeBlockContainer_Ckt0 theme-code-block"
                                    style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                    <div class="codeBlockContent_biex">
                                       <pre tabindex="0"
                                          class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token builtin class-name" style="color:rgb(38, 127, 153)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">LANGCHAIN_TRACING_V2</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;true&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(38, 127, 153)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">LANGCHAIN_API_KEY</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;...&quot;</span><br></span></code></pre>
                                       <div class="buttonGroup__atx"><button type="button"
                                             aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span
                                                class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24"
                                                   class="copyButtonIcon_y97N">
                                                   <path fill="currentColor"
                                                      d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                   </path>
                                                </svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS">
                                                   <path fill="currentColor"
                                                      d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                   </path>
                                                </svg></span></button></div>
                                    </div>
                                 </div>
                                 <h2 class="anchor anchorWithStickyNavbar_LWe7" id="building-with-langchain">Building
                                    with LangChain<a href="#building-with-langchain" class="hash-link"
                                       aria-label="Direct link to Building with LangChain"
                                       title="Direct link to Building with LangChain">‚Äã</a></h2>
                                 <p>LangChain enables building application that connect external sources of data and
                                    computation to LLMs.
                                    In this quickstart, we will walk through a few different ways of doing that.
                                    We will start with a simple LLM chain, which just relies on information in the
                                    prompt template to respond.
                                    Next, we will build a retrieval chain, which fetches data from a separate database
                                    and passes that into the prompt template.
                                    We will then add in chat history, to create a conversation retrieval chain. This
                                    allows you interact in a chat manner with this LLM, so it remembers previous
                                    questions.
                                    Finally, we will build an agent - which utilizes an LLM to determine whether or not
                                    it needs to fetch data to answer questions.
                                    We will cover these at a high level, but there are lot of details to all of these!
                                    We will link to relevant docs.</p>
                                 <h2 class="anchor anchorWithStickyNavbar_LWe7" id="llm-chain">LLM Chain<a
                                       href="#llm-chain" class="hash-link" aria-label="Direct link to LLM Chain"
                                       title="Direct link to LLM Chain">‚Äã</a></h2>
                                 <p>For this getting started guide, we will provide two options: using OpenAI (a popular
                                    model available via API) or using a local open source model.</p>
                                 <div class="tabs-container tabList__CuJ">
                                    <ul role="tablist" aria-orientation="horizontal" class="tabs">
                                       <li role="tab" tabindex="0" aria-selected="true"
                                          class="tabs__item tabItem_LNqP tabs__item--active">OpenAI</li>
                                       <li role="tab" tabindex="-1" aria-selected="false"
                                          class="tabs__item tabItem_LNqP">Local</li>
                                    </ul>
                                    <div class="margin-top--md">
                                       <div role="tabpanel" class="tabItem_Ymn6">
                                          <p>First we&#x27;ll need to import the LangChain x OpenAI integration package.
                                          </p>
                                          <div class="language-shell codeBlockContainer_Ckt0 theme-code-block"
                                             style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                             <div class="codeBlockContent_biex">
                                                <pre tabindex="0"
                                                   class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">pip </span><span class="token function" style="color:rgb(0, 0, 255)">install</span><span class="token plain"> langchain-openai</span><br></span></code></pre>
                                                <div class="buttonGroup__atx"><button type="button"
                                                      aria-label="Copy code to clipboard" title="Copy"
                                                      class="clean-btn"><span class="copyButtonIcons_eSgA"
                                                         aria-hidden="true"><svg viewBox="0 0 24 24"
                                                            class="copyButtonIcon_y97N">
                                                            <path fill="currentColor"
                                                               d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                            </path>
                                                         </svg><svg viewBox="0 0 24 24"
                                                            class="copyButtonSuccessIcon_LjdS">
                                                            <path fill="currentColor"
                                                               d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                            </path>
                                                         </svg></span></button></div>
                                             </div>
                                          </div>
                                          <p>Accessing the API requires an API key, which you can get by creating an
                                             account and heading <a href="https://platform.openai.com/account/api-keys"
                                                target="_blank" rel="noopener noreferrer">here</a>. Once we have a key
                                             we&#x27;ll want to set it as an environment variable by running:</p>
                                          <div class="language-shell codeBlockContainer_Ckt0 theme-code-block"
                                             style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                             <div class="codeBlockContent_biex">
                                                <pre tabindex="0"
                                                   class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token builtin class-name" style="color:rgb(38, 127, 153)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">OPENAI_API_KEY</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;...&quot;</span><br></span></code></pre>
                                                <div class="buttonGroup__atx"><button type="button"
                                                      aria-label="Copy code to clipboard" title="Copy"
                                                      class="clean-btn"><span class="copyButtonIcons_eSgA"
                                                         aria-hidden="true"><svg viewBox="0 0 24 24"
                                                            class="copyButtonIcon_y97N">
                                                            <path fill="currentColor"
                                                               d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                            </path>
                                                         </svg><svg viewBox="0 0 24 24"
                                                            class="copyButtonSuccessIcon_LjdS">
                                                            <path fill="currentColor"
                                                               d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                            </path>
                                                         </svg></span></button></div>
                                             </div>
                                          </div>
                                          <p>We can then initialize the model:</p>
                                          <div class="language-python codeBlockContainer_Ckt0 theme-code-block"
                                             style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                             <div class="codeBlockContent_biex">
                                                <pre tabindex="0"
                                                   class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain_openai </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> ChatOpenAI</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">llm </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> ChatOpenAI</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre>
                                                <div class="buttonGroup__atx"><button type="button"
                                                      aria-label="Copy code to clipboard" title="Copy"
                                                      class="clean-btn"><span class="copyButtonIcons_eSgA"
                                                         aria-hidden="true"><svg viewBox="0 0 24 24"
                                                            class="copyButtonIcon_y97N">
                                                            <path fill="currentColor"
                                                               d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                            </path>
                                                         </svg><svg viewBox="0 0 24 24"
                                                            class="copyButtonSuccessIcon_LjdS">
                                                            <path fill="currentColor"
                                                               d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                            </path>
                                                         </svg></span></button></div>
                                             </div>
                                          </div>
                                          <p>If you&#x27;d prefer not to set an environment variable you can pass the
                                             key in directly via the <code>openai_api_key</code> named parameter when
                                             initiating the OpenAI LLM class:</p>
                                          <div class="language-python codeBlockContainer_Ckt0 theme-code-block"
                                             style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                             <div class="codeBlockContent_biex">
                                                <pre tabindex="0"
                                                   class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain_openai </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> ChatOpenAI</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">llm </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> ChatOpenAI</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">openai_api_key</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;...&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre>
                                                <div class="buttonGroup__atx"><button type="button"
                                                      aria-label="Copy code to clipboard" title="Copy"
                                                      class="clean-btn"><span class="copyButtonIcons_eSgA"
                                                         aria-hidden="true"><svg viewBox="0 0 24 24"
                                                            class="copyButtonIcon_y97N">
                                                            <path fill="currentColor"
                                                               d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                            </path>
                                                         </svg><svg viewBox="0 0 24 24"
                                                            class="copyButtonSuccessIcon_LjdS">
                                                            <path fill="currentColor"
                                                               d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                            </path>
                                                         </svg></span></button></div>
                                             </div>
                                          </div>
                                       </div>
                                       <div role="tabpanel" class="tabItem_Ymn6" hidden="">
                                          <p><a href="https://ollama.ai/" target="_blank"
                                                rel="noopener noreferrer">Ollama</a> allows you to run open-source large
                                             language models, such as Llama 2, locally.</p>
                                          <p>First, follow <a href="https://github.com/jmorganca/ollama" target="_blank"
                                                rel="noopener noreferrer">these instructions</a> to set up and run a
                                             local Ollama instance:</p>
                                          <ul>
                                             <li><a href="https://ollama.ai/download" target="_blank"
                                                   rel="noopener noreferrer">Download</a></li>
                                             <li>Fetch a model via <code>ollama pull llama2</code></li>
                                          </ul>
                                          <p>Then, make sure the Ollama server is running. After that, you can do:</p>
                                          <div class="language-python codeBlockContainer_Ckt0 theme-code-block"
                                             style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                             <div class="codeBlockContent_biex">
                                                <pre tabindex="0"
                                                   class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain_community</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">llms </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> Ollama</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">llm </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Ollama</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">model</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;llama2&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre>
                                                <div class="buttonGroup__atx"><button type="button"
                                                      aria-label="Copy code to clipboard" title="Copy"
                                                      class="clean-btn"><span class="copyButtonIcons_eSgA"
                                                         aria-hidden="true"><svg viewBox="0 0 24 24"
                                                            class="copyButtonIcon_y97N">
                                                            <path fill="currentColor"
                                                               d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                            </path>
                                                         </svg><svg viewBox="0 0 24 24"
                                                            class="copyButtonSuccessIcon_LjdS">
                                                            <path fill="currentColor"
                                                               d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                            </path>
                                                         </svg></span></button></div>
                                             </div>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                                 <p>Once you&#x27;ve installed and initialized the LLM of your choice, we can try using
                                    it!
                                    Let&#x27;s ask it what LangSmith is - this is something that wasn&#x27;t present in
                                    the training data so it shouldn&#x27;t have a very good response.</p>
                                 <div class="language-python codeBlockContainer_Ckt0 theme-code-block"
                                    style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                    <div class="codeBlockContent_biex">
                                       <pre tabindex="0"
                                          class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">llm</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">invoke</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;how can langsmith help with testing?&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre>
                                       <div class="buttonGroup__atx"><button type="button"
                                             aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span
                                                class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24"
                                                   class="copyButtonIcon_y97N">
                                                   <path fill="currentColor"
                                                      d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                   </path>
                                                </svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS">
                                                   <path fill="currentColor"
                                                      d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                   </path>
                                                </svg></span></button></div>
                                    </div>
                                 </div>
                                 <p>We can also guide it&#x27;s response with a prompt template.
                                    Prompt templates are used to convert raw user input to a better input to the LLM.
                                 </p>
                                 <div class="language-python codeBlockContainer_Ckt0 theme-code-block"
                                    style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                    <div class="codeBlockContent_biex">
                                       <pre tabindex="0"
                                          class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain_core</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">prompts </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> ChatPromptTemplate</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">prompt </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> ChatPromptTemplate</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">from_messages</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;system&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;You are world class technical documentation writer.&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;user&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;{input}&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre>
                                       <div class="buttonGroup__atx"><button type="button"
                                             aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span
                                                class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24"
                                                   class="copyButtonIcon_y97N">
                                                   <path fill="currentColor"
                                                      d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                   </path>
                                                </svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS">
                                                   <path fill="currentColor"
                                                      d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                   </path>
                                                </svg></span></button></div>
                                    </div>
                                 </div>
                                 <p>We can now combine these into a simple LLM chain:</p>
                                 <div class="language-python codeBlockContainer_Ckt0 theme-code-block"
                                    style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                    <div class="codeBlockContent_biex">
                                       <pre tabindex="0"
                                          class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">chain </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> prompt </span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain"> llm </span><br></span></code></pre>
                                       <div class="buttonGroup__atx"><button type="button"
                                             aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span
                                                class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24"
                                                   class="copyButtonIcon_y97N">
                                                   <path fill="currentColor"
                                                      d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                   </path>
                                                </svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS">
                                                   <path fill="currentColor"
                                                      d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                   </path>
                                                </svg></span></button></div>
                                    </div>
                                 </div>
                                 <p>We can now invoke it and ask the same question. It still won&#x27;t know the answer,
                                    but it should respond in a more proper tone for a technical writer!</p>
                                 <div class="language-python codeBlockContainer_Ckt0 theme-code-block"
                                    style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                    <div class="codeBlockContent_biex">
                                       <pre tabindex="0"
                                          class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">chain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">invoke</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;input&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;how can langsmith help with testing?&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre>
                                       <div class="buttonGroup__atx"><button type="button"
                                             aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span
                                                class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24"
                                                   class="copyButtonIcon_y97N">
                                                   <path fill="currentColor"
                                                      d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                   </path>
                                                </svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS">
                                                   <path fill="currentColor"
                                                      d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                   </path>
                                                </svg></span></button></div>
                                    </div>
                                 </div>
                                 <p>The output of a ChatModel (and therefore, of this chain) is a message. However,
                                    it&#x27;s often much more convenient to work with strings. Let&#x27;s add a simple
                                    output parser to convert the chat message to a string.</p>
                                 <div class="language-python codeBlockContainer_Ckt0 theme-code-block"
                                    style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                    <div class="codeBlockContent_biex">
                                       <pre tabindex="0"
                                          class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain_core</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">output_parsers </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> StrOutputParser</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">output_parser </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> StrOutputParser</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre>
                                       <div class="buttonGroup__atx"><button type="button"
                                             aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span
                                                class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24"
                                                   class="copyButtonIcon_y97N">
                                                   <path fill="currentColor"
                                                      d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                   </path>
                                                </svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS">
                                                   <path fill="currentColor"
                                                      d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                   </path>
                                                </svg></span></button></div>
                                    </div>
                                 </div>
                                 <p>We can now add this to the previous chain:</p>
                                 <div class="language-python codeBlockContainer_Ckt0 theme-code-block"
                                    style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                    <div class="codeBlockContent_biex">
                                       <pre tabindex="0"
                                          class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">chain </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> prompt </span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain"> llm </span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain"> output_parser</span><br></span></code></pre>
                                       <div class="buttonGroup__atx"><button type="button"
                                             aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span
                                                class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24"
                                                   class="copyButtonIcon_y97N">
                                                   <path fill="currentColor"
                                                      d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                   </path>
                                                </svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS">
                                                   <path fill="currentColor"
                                                      d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                   </path>
                                                </svg></span></button></div>
                                    </div>
                                 </div>
                                 <p>We can now invoke it and ask the same question. The answer will now be a string
                                    (rather than a ChatMessage).</p>
                                 <div class="language-python codeBlockContainer_Ckt0 theme-code-block"
                                    style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                    <div class="codeBlockContent_biex">
                                       <pre tabindex="0"
                                          class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">chain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">invoke</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;input&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;how can langsmith help with testing?&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre>
                                       <div class="buttonGroup__atx"><button type="button"
                                             aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span
                                                class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24"
                                                   class="copyButtonIcon_y97N">
                                                   <path fill="currentColor"
                                                      d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                   </path>
                                                </svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS">
                                                   <path fill="currentColor"
                                                      d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                   </path>
                                                </svg></span></button></div>
                                    </div>
                                 </div>
                                 <h3 class="anchor anchorWithStickyNavbar_LWe7" id="diving-deeper">Diving Deeper<a
                                       href="#diving-deeper" class="hash-link" aria-label="Direct link to Diving Deeper"
                                       title="Direct link to Diving Deeper">‚Äã</a></h3>
                                 <p>We&#x27;ve now successfully set up a basic LLM chain. We only touched on the basics
                                    of prompts, models, and output parsers - for a deeper dive into everything mentioned
                                    here, see <a href="/docs/modules/model_io">this section of documentation</a>.</p>
                                 <h2 class="anchor anchorWithStickyNavbar_LWe7" id="retrieval-chain">Retrieval Chain<a
                                       href="#retrieval-chain" class="hash-link"
                                       aria-label="Direct link to Retrieval Chain"
                                       title="Direct link to Retrieval Chain">‚Äã</a></h2>
                                 <p>In order to properly answer the original question (&quot;how can langsmith help with
                                    testing?&quot;), we need to provide additional context to the LLM.
                                    We can do this via <em>retrieval</em>.
                                    Retrieval is useful when you have <strong>too much data</strong> to pass to the LLM
                                    directly.
                                    You can then use a retriever to fetch only the most relevant pieces and pass those
                                    in.</p>
                                 <p>In this process, we will look up relevant documents from a <em>Retriever</em> and
                                    then pass them into the prompt.
                                    A Retriever can be backed by anything - a SQL table, the internet, etc - but in this
                                    instance we will populate a vector store and use that as a retriever. For more
                                    information on vectorstores, see <a
                                       href="/docs/modules/data_connection/vectorstores">this documentation</a>.</p>
                                 <p>First, we need to load the data that we want to index. In order to do this, we will
                                    use the WebBaseLoader. This requires installing <a
                                       href="https://beautiful-soup-4.readthedocs.io/en/latest/" target="_blank"
                                       rel="noopener noreferrer">BeautifulSoup</a>:</p>
                                 <div class="language-shell codeBlockContainer_Ckt0 theme-code-block"
                                    style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                    <div class="codeBlockContent_biex">
                                       <pre tabindex="0"
                                          class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">pip </span><span class="token function" style="color:rgb(0, 0, 255)">install</span><span class="token plain"> beautifulsoup4</span><br></span></code></pre>
                                       <div class="buttonGroup__atx"><button type="button"
                                             aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span
                                                class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24"
                                                   class="copyButtonIcon_y97N">
                                                   <path fill="currentColor"
                                                      d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                   </path>
                                                </svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS">
                                                   <path fill="currentColor"
                                                      d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                   </path>
                                                </svg></span></button></div>
                                    </div>
                                 </div>
                                 <p>After that, we can import and use WebBaseLoader.</p>
                                 <div class="language-python codeBlockContainer_Ckt0 theme-code-block"
                                    style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                    <div class="codeBlockContent_biex">
                                       <pre tabindex="0"
                                          class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain_community</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">document_loaders </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> WebBaseLoader</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">loader </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> WebBaseLoader</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;https://docs.smith.langchain.com/overview&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">docs </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> loader</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">load</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre>
                                       <div class="buttonGroup__atx"><button type="button"
                                             aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span
                                                class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24"
                                                   class="copyButtonIcon_y97N">
                                                   <path fill="currentColor"
                                                      d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                   </path>
                                                </svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS">
                                                   <path fill="currentColor"
                                                      d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                   </path>
                                                </svg></span></button></div>
                                    </div>
                                 </div>
                                 <p>Next, we need to index it into a vectorstore. This requires a few components, namely
                                    an <a href="/docs/modules/data_connection/text_embedding">embedding model</a> and a
                                    <a href="/docs/modules/data_connection/vectorstores">vectorstore</a>.</p>
                                 <p>For embedding models, we once again provide examples for accessing via OpenAI or via
                                    local models.</p>
                                 <div class="tabs-container tabList__CuJ">
                                    <ul role="tablist" aria-orientation="horizontal" class="tabs">
                                       <li role="tab" tabindex="0" aria-selected="true"
                                          class="tabs__item tabItem_LNqP tabs__item--active">OpenAI</li>
                                       <li role="tab" tabindex="-1" aria-selected="false"
                                          class="tabs__item tabItem_LNqP">Local</li>
                                    </ul>
                                    <div class="margin-top--md">
                                       <div role="tabpanel" class="tabItem_Ymn6">Make sure you have the
                                          `langchain_openai` package installed an the appropriate environment variables
                                          set (these are the same as needed for the LLM).<div
                                             class="language-python codeBlockContainer_Ckt0 theme-code-block"
                                             style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                             <div class="codeBlockContent_biex">
                                                <pre tabindex="0"
                                                   class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain_openai </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> OpenAIEmbeddings</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">embeddings </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> OpenAIEmbeddings</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre>
                                                <div class="buttonGroup__atx"><button type="button"
                                                      aria-label="Copy code to clipboard" title="Copy"
                                                      class="clean-btn"><span class="copyButtonIcons_eSgA"
                                                         aria-hidden="true"><svg viewBox="0 0 24 24"
                                                            class="copyButtonIcon_y97N">
                                                            <path fill="currentColor"
                                                               d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                            </path>
                                                         </svg><svg viewBox="0 0 24 24"
                                                            class="copyButtonSuccessIcon_LjdS">
                                                            <path fill="currentColor"
                                                               d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                            </path>
                                                         </svg></span></button></div>
                                             </div>
                                          </div>
                                       </div>
                                       <div role="tabpanel" class="tabItem_Ymn6" hidden="">
                                          <p>Make sure you have Ollama running (same set up as with the LLM).</p>
                                          <div class="language-python codeBlockContainer_Ckt0 theme-code-block"
                                             style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                             <div class="codeBlockContent_biex">
                                                <pre tabindex="0"
                                                   class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain_community</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">embeddings </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> OllamaEmbeddings</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">embeddings </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> OllamaEmbeddings</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre>
                                                <div class="buttonGroup__atx"><button type="button"
                                                      aria-label="Copy code to clipboard" title="Copy"
                                                      class="clean-btn"><span class="copyButtonIcons_eSgA"
                                                         aria-hidden="true"><svg viewBox="0 0 24 24"
                                                            class="copyButtonIcon_y97N">
                                                            <path fill="currentColor"
                                                               d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                            </path>
                                                         </svg><svg viewBox="0 0 24 24"
                                                            class="copyButtonSuccessIcon_LjdS">
                                                            <path fill="currentColor"
                                                               d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                            </path>
                                                         </svg></span></button></div>
                                             </div>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                                 <p>Now, we can use this embedding model to ingest documents into a vectorstore.
                                    We will use a simple local vectorstore, <a
                                       href="/docs/integrations/vectorstores/faiss">FAISS</a>, for simplicity&#x27;s
                                    sake.</p>
                                 <p>First we need to install the required packages for that:</p>
                                 <div class="language-shell codeBlockContainer_Ckt0 theme-code-block"
                                    style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                    <div class="codeBlockContent_biex">
                                       <pre tabindex="0"
                                          class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">pip </span><span class="token function" style="color:rgb(0, 0, 255)">install</span><span class="token plain"> faiss-cpu</span><br></span></code></pre>
                                       <div class="buttonGroup__atx"><button type="button"
                                             aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span
                                                class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24"
                                                   class="copyButtonIcon_y97N">
                                                   <path fill="currentColor"
                                                      d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                   </path>
                                                </svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS">
                                                   <path fill="currentColor"
                                                      d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                   </path>
                                                </svg></span></button></div>
                                    </div>
                                 </div>
                                 <p>Then we can build our index:</p>
                                 <div class="language-python codeBlockContainer_Ckt0 theme-code-block"
                                    style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                    <div class="codeBlockContent_biex">
                                       <pre tabindex="0"
                                          class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain_community</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">vectorstores </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> FAISS</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">text_splitter </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> RecursiveCharacterTextSplitter</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">text_splitter </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> RecursiveCharacterTextSplitter</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">documents </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> text_splitter</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">split_documents</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">docs</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">vector </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> FAISS</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">from_documents</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">documents</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> embeddings</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre>
                                       <div class="buttonGroup__atx"><button type="button"
                                             aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span
                                                class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24"
                                                   class="copyButtonIcon_y97N">
                                                   <path fill="currentColor"
                                                      d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                   </path>
                                                </svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS">
                                                   <path fill="currentColor"
                                                      d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                   </path>
                                                </svg></span></button></div>
                                    </div>
                                 </div>
                                 <p>Now that we have this data indexed in a vectorstore, we will create a retrieval
                                    chain.
                                    This chain will take an incoming question, look up relevant documents, then pass
                                    those documents along with the original question into an LLM and ask it to answer
                                    the original question.</p>
                                 <p>First, let&#x27;s set up the chain that takes a question and the retrieved documents
                                    and generates an answer.</p>
                                 <div class="language-python codeBlockContainer_Ckt0 theme-code-block"
                                    style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                    <div class="codeBlockContent_biex">
                                       <pre tabindex="0"
                                          class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">chains</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">combine_documents </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> create_stuff_documents_chain</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">prompt </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> ChatPromptTemplate</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">from_template</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token triple-quoted-string string" style="color:rgb(163, 21, 21)">&quot;&quot;&quot;Answer the following question based only on the provided context:</span><br></span><span class="token-line" style="color:#000000"><span class="token triple-quoted-string string" style="display:inline-block;color:rgb(163, 21, 21)"></span><br></span><span class="token-line" style="color:#000000"><span class="token triple-quoted-string string" style="color:rgb(163, 21, 21)">&lt;context&gt;</span><br></span><span class="token-line" style="color:#000000"><span class="token triple-quoted-string string" style="color:rgb(163, 21, 21)">{context}</span><br></span><span class="token-line" style="color:#000000"><span class="token triple-quoted-string string" style="color:rgb(163, 21, 21)">&lt;/context&gt;</span><br></span><span class="token-line" style="color:#000000"><span class="token triple-quoted-string string" style="display:inline-block;color:rgb(163, 21, 21)"></span><br></span><span class="token-line" style="color:#000000"><span class="token triple-quoted-string string" style="color:rgb(163, 21, 21)">Question: {input}&quot;&quot;&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">document_chain </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> create_stuff_documents_chain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">llm</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> prompt</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre>
                                       <div class="buttonGroup__atx"><button type="button"
                                             aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span
                                                class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24"
                                                   class="copyButtonIcon_y97N">
                                                   <path fill="currentColor"
                                                      d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                   </path>
                                                </svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS">
                                                   <path fill="currentColor"
                                                      d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                   </path>
                                                </svg></span></button></div>
                                    </div>
                                 </div>
                                 <p>If we wanted to, we could run this ourselves by passing in documents directly:</p>
                                 <div class="language-python codeBlockContainer_Ckt0 theme-code-block"
                                    style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                    <div class="codeBlockContent_biex">
                                       <pre tabindex="0"
                                          class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain_core</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">documents </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> Document</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">document_chain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">invoke</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;input&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;how can langsmith help with testing?&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;context&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">Document</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">page_content</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;langsmith can let you visualize test results&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre>
                                       <div class="buttonGroup__atx"><button type="button"
                                             aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span
                                                class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24"
                                                   class="copyButtonIcon_y97N">
                                                   <path fill="currentColor"
                                                      d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                   </path>
                                                </svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS">
                                                   <path fill="currentColor"
                                                      d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                   </path>
                                                </svg></span></button></div>
                                    </div>
                                 </div>
                                 <p>However, we want the documents to first come from the retriever we just set up.
                                    That way, for a given question we can use the retriever to dynamically select the
                                    most relevant documents and pass those in.</p>
                                 <div class="language-python codeBlockContainer_Ckt0 theme-code-block"
                                    style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                    <div class="codeBlockContent_biex">
                                       <pre tabindex="0"
                                          class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">chains </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> create_retrieval_chain</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">retriever </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> vector</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">as_retriever</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">retrieval_chain </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> create_retrieval_chain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">retriever</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> document_chain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre>
                                       <div class="buttonGroup__atx"><button type="button"
                                             aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span
                                                class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24"
                                                   class="copyButtonIcon_y97N">
                                                   <path fill="currentColor"
                                                      d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                   </path>
                                                </svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS">
                                                   <path fill="currentColor"
                                                      d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                   </path>
                                                </svg></span></button></div>
                                    </div>
                                 </div>
                                 <p>We can now invoke this chain. This returns a dictionary - the response from the LLM
                                    is in the <code>answer</code> key</p>
                                 <div class="language-python codeBlockContainer_Ckt0 theme-code-block"
                                    style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                    <div class="codeBlockContent_biex">
                                       <pre tabindex="0"
                                          class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">response </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> retrieval_chain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">invoke</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;input&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;how can langsmith help with testing?&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">print</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">response</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;answer&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># LangSmith offers several features that can help with testing:...</span><br></span></code></pre>
                                       <div class="buttonGroup__atx"><button type="button"
                                             aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span
                                                class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24"
                                                   class="copyButtonIcon_y97N">
                                                   <path fill="currentColor"
                                                      d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                   </path>
                                                </svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS">
                                                   <path fill="currentColor"
                                                      d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                   </path>
                                                </svg></span></button></div>
                                    </div>
                                 </div>
                                 <p>This answer should be much more accurate!</p>
                                 <h3 class="anchor anchorWithStickyNavbar_LWe7" id="diving-deeper-1">Diving Deeper<a
                                       href="#diving-deeper-1" class="hash-link"
                                       aria-label="Direct link to Diving Deeper"
                                       title="Direct link to Diving Deeper">‚Äã</a></h3>
                                 <p>We&#x27;ve now successfully set up a basic retrieval chain. We only touched on the
                                    basics of retrieval - for a deeper dive into everything mentioned here, see <a
                                       href="/docs/modules/data_connection">this section of documentation</a>.</p>
                                 <h2 class="anchor anchorWithStickyNavbar_LWe7" id="conversation-retrieval-chain">
                                    Conversation Retrieval Chain<a href="#conversation-retrieval-chain"
                                       class="hash-link" aria-label="Direct link to Conversation Retrieval Chain"
                                       title="Direct link to Conversation Retrieval Chain">‚Äã</a></h2>
                                 <p>The chain we&#x27;ve created so far can only answer single questions. One of the
                                    main types of LLM applications that people are building are chat bots. So how do we
                                    turn this chain into one that can answer follow up questions?</p>
                                 <p>We can still use the <code>create_retrieval_chain</code> function, but we need to
                                    change two things:</p>
                                 <ol>
                                    <li>The retrieval method should now not just work on the most recent input, but
                                       rather should take the whole history into account.</li>
                                    <li>The final LLM chain should likewise take the whole history into account</li>
                                 </ol>
                                 <p><strong>Updating Retrieval</strong></p>
                                 <p>In order to update retrieval, we will create a new chain. This chain will take in
                                    the most recent input (<code>input</code>) and the conversation history
                                    (<code>chat_history</code>) and use an LLM to generate a search query.</p>
                                 <div class="language-python codeBlockContainer_Ckt0 theme-code-block"
                                    style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                    <div class="codeBlockContent_biex">
                                       <pre tabindex="0"
                                          class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">chains </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> create_history_aware_retriever</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain_core</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">prompts </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> MessagesPlaceholder</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># First we need a prompt that we can pass into an LLM to generate this search query</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">prompt </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> ChatPromptTemplate</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">from_messages</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    MessagesPlaceholder</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">variable_name</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;chat_history&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;user&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;{input}&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;user&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Given the above conversation, generate a search query to look up in order to get information relevant to the conversation&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">retriever_chain </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> create_history_aware_retriever</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">llm</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> retriever</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> prompt</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre>
                                       <div class="buttonGroup__atx"><button type="button"
                                             aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span
                                                class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24"
                                                   class="copyButtonIcon_y97N">
                                                   <path fill="currentColor"
                                                      d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                   </path>
                                                </svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS">
                                                   <path fill="currentColor"
                                                      d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                   </path>
                                                </svg></span></button></div>
                                    </div>
                                 </div>
                                 <p>We can test this out by passing in an instance where the user is asking a follow up
                                    question.</p>
                                 <div class="language-python codeBlockContainer_Ckt0 theme-code-block"
                                    style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                    <div class="codeBlockContent_biex">
                                       <pre tabindex="0"
                                          class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain_core</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">messages </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> HumanMessage</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> AIMessage</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">chat_history </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">HumanMessage</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">content</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Can LangSmith help test my LLM applications?&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> AIMessage</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">content</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Yes!&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">retriever_chain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">invoke</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;chat_history&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> chat_history</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;input&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Tell me how&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre>
                                       <div class="buttonGroup__atx"><button type="button"
                                             aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span
                                                class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24"
                                                   class="copyButtonIcon_y97N">
                                                   <path fill="currentColor"
                                                      d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                   </path>
                                                </svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS">
                                                   <path fill="currentColor"
                                                      d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                   </path>
                                                </svg></span></button></div>
                                    </div>
                                 </div>
                                 <p>You should see that this returns documents about testing in LangSmith. This is
                                    because the LLM generated a new query, combining the chat history with the follow up
                                    question.</p>
                                 <p>Now that we have this new retriever, we can create a new chain to continue the
                                    conversation with these retrieved documents in mind.</p>
                                 <div class="language-python codeBlockContainer_Ckt0 theme-code-block"
                                    style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                    <div class="codeBlockContent_biex">
                                       <pre tabindex="0"
                                          class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">prompt </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> ChatPromptTemplate</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">from_messages</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;system&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Answer the user&#x27;s questions based on the below context:\n\n{context}&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    MessagesPlaceholder</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">variable_name</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;chat_history&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;user&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;{input}&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">document_chain </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> create_stuff_documents_chain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">llm</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> prompt</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">retrieval_chain </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> create_retrieval_chain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">retriever_chain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> document_chain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre>
                                       <div class="buttonGroup__atx"><button type="button"
                                             aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span
                                                class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24"
                                                   class="copyButtonIcon_y97N">
                                                   <path fill="currentColor"
                                                      d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                   </path>
                                                </svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS">
                                                   <path fill="currentColor"
                                                      d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                   </path>
                                                </svg></span></button></div>
                                    </div>
                                 </div>
                                 <p>We can now test this out end-to-end:</p>
                                 <div class="language-python codeBlockContainer_Ckt0 theme-code-block"
                                    style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                    <div class="codeBlockContent_biex">
                                       <pre tabindex="0"
                                          class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">chat_history </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">HumanMessage</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">content</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Can LangSmith help test my LLM applications?&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> AIMessage</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">content</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Yes!&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">retrieval_chain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">invoke</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;chat_history&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> chat_history</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;input&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Tell me how&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre>
                                       <div class="buttonGroup__atx"><button type="button"
                                             aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span
                                                class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24"
                                                   class="copyButtonIcon_y97N">
                                                   <path fill="currentColor"
                                                      d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                   </path>
                                                </svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS">
                                                   <path fill="currentColor"
                                                      d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                   </path>
                                                </svg></span></button></div>
                                    </div>
                                 </div>
                                 <p>We can see that this gives a coherent answer - we&#x27;ve successfully turned our
                                    retrieval chain into a chatbot!</p>
                                 <h2 class="anchor anchorWithStickyNavbar_LWe7" id="agent">Agent<a href="#agent"
                                       class="hash-link" aria-label="Direct link to Agent"
                                       title="Direct link to Agent">‚Äã</a></h2>
                                 <p>We&#x27;ve so far create examples of chains - where each step is known ahead of
                                    time.
                                    The final thing we will create is an agent - where the LLM decides what steps to
                                    take.</p>
                                 <p><strong>NOTE: for this example we will only show how to create an agent using OpenAI
                                       models, as local models are not reliable enough yet.</strong></p>
                                 <p>One of the first things to do when building an agent is to decide what tools it
                                    should have access to.
                                    For this example, we will give the agent access two tools:</p>
                                 <ol>
                                    <li>The retriever we just created. This will let it easily answer questions about
                                       LangSmith</li>
                                    <li>A search tool. This will let it easily answer questions that require up to date
                                       information.</li>
                                 </ol>
                                 <p>First, let&#x27;s set up a tool for the retriever we just created:</p>
                                 <div class="language-python codeBlockContainer_Ckt0 theme-code-block"
                                    style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                    <div class="codeBlockContent_biex">
                                       <pre tabindex="0"
                                          class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">tools</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">retriever </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> create_retriever_tool</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">retriever_tool </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> create_retriever_tool</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    retriever</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;langsmith_search&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Search for information about LangSmith. For any questions about LangSmith, you must use this tool!&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre>
                                       <div class="buttonGroup__atx"><button type="button"
                                             aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span
                                                class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24"
                                                   class="copyButtonIcon_y97N">
                                                   <path fill="currentColor"
                                                      d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                   </path>
                                                </svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS">
                                                   <path fill="currentColor"
                                                      d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                   </path>
                                                </svg></span></button></div>
                                    </div>
                                 </div>
                                 <p>The search tool that we will use is <a
                                       href="/docs/integrations/retrievers/tavily">Tavily</a>. This will require an API
                                    key (they have generous free tier). After creating it on their platform, you need to
                                    set it as an environment variable:</p>
                                 <div class="language-shell codeBlockContainer_Ckt0 theme-code-block"
                                    style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                    <div class="codeBlockContent_biex">
                                       <pre tabindex="0"
                                          class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token builtin class-name" style="color:rgb(38, 127, 153)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">TAVILY_API_KEY</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token plain">.</span><br></span></code></pre>
                                       <div class="buttonGroup__atx"><button type="button"
                                             aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span
                                                class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24"
                                                   class="copyButtonIcon_y97N">
                                                   <path fill="currentColor"
                                                      d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                   </path>
                                                </svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS">
                                                   <path fill="currentColor"
                                                      d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                   </path>
                                                </svg></span></button></div>
                                    </div>
                                 </div>
                                 <p>If you do not want to set up an API key, you can skip creating this tool.</p>
                                 <div class="language-python codeBlockContainer_Ckt0 theme-code-block"
                                    style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                    <div class="codeBlockContent_biex">
                                       <pre tabindex="0"
                                          class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain_community</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">tools</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">tavily_search </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> TavilySearchResults</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">search </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> TavilySearchResults</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre>
                                       <div class="buttonGroup__atx"><button type="button"
                                             aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span
                                                class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24"
                                                   class="copyButtonIcon_y97N">
                                                   <path fill="currentColor"
                                                      d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                   </path>
                                                </svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS">
                                                   <path fill="currentColor"
                                                      d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                   </path>
                                                </svg></span></button></div>
                                    </div>
                                 </div>
                                 <p>We can now create a list of the tools we want to work with:</p>
                                 <div class="language-python codeBlockContainer_Ckt0 theme-code-block"
                                    style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                    <div class="codeBlockContent_biex">
                                       <pre tabindex="0"
                                          class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">tools </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">retriever_tool</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> search</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><br></span></code></pre>
                                       <div class="buttonGroup__atx"><button type="button"
                                             aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span
                                                class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24"
                                                   class="copyButtonIcon_y97N">
                                                   <path fill="currentColor"
                                                      d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                   </path>
                                                </svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS">
                                                   <path fill="currentColor"
                                                      d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                   </path>
                                                </svg></span></button></div>
                                    </div>
                                 </div>
                                 <p>Now that we have the tools, we can create an agent to use them. We will go over this
                                    pretty quickly - for a deeper dive into what exactly is going on, check out the <a
                                       href="/docs/modules/agents">Agent&#x27;s Getting Started documentation</a></p>
                                 <p>Install langchain hub first</p>
                                 <div class="language-bash codeBlockContainer_Ckt0 theme-code-block"
                                    style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                    <div class="codeBlockContent_biex">
                                       <pre tabindex="0"
                                          class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">pip </span><span class="token function" style="color:rgb(0, 0, 255)">install</span><span class="token plain"> langchainhub</span><br></span></code></pre>
                                       <div class="buttonGroup__atx"><button type="button"
                                             aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span
                                                class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24"
                                                   class="copyButtonIcon_y97N">
                                                   <path fill="currentColor"
                                                      d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                   </path>
                                                </svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS">
                                                   <path fill="currentColor"
                                                      d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                   </path>
                                                </svg></span></button></div>
                                    </div>
                                 </div>
                                 <p>Now we can use it to get a predefined prompt</p>
                                 <div class="language-python codeBlockContainer_Ckt0 theme-code-block"
                                    style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                    <div class="codeBlockContent_biex">
                                       <pre tabindex="0"
                                          class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain_openai </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> ChatOpenAI</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> hub</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">agents </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> create_openai_functions_agent</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">agents </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> AgentExecutor</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># Get the prompt to use - you can modify this!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">prompt </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> hub</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">pull</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;hwchase17/openai-functions-agent&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">llm </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> ChatOpenAI</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">model</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;gpt-3.5-turbo&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> temperature</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">agent </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> create_openai_functions_agent</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">llm</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> tools</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> prompt</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">agent_executor </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> AgentExecutor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">agent</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">agent</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> tools</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">tools</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> verbose</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token boolean">True</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre>
                                       <div class="buttonGroup__atx"><button type="button"
                                             aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span
                                                class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24"
                                                   class="copyButtonIcon_y97N">
                                                   <path fill="currentColor"
                                                      d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                   </path>
                                                </svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS">
                                                   <path fill="currentColor"
                                                      d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                   </path>
                                                </svg></span></button></div>
                                    </div>
                                 </div>
                                 <p>We can now invoke the agent and see how it responds! We can ask it questions about
                                    LangSmith:</p>
                                 <div class="language-python codeBlockContainer_Ckt0 theme-code-block"
                                    style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                    <div class="codeBlockContent_biex">
                                       <pre tabindex="0"
                                          class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">agent_executor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">invoke</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;input&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;how can langsmith help with testing?&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre>
                                       <div class="buttonGroup__atx"><button type="button"
                                             aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span
                                                class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24"
                                                   class="copyButtonIcon_y97N">
                                                   <path fill="currentColor"
                                                      d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                   </path>
                                                </svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS">
                                                   <path fill="currentColor"
                                                      d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                   </path>
                                                </svg></span></button></div>
                                    </div>
                                 </div>
                                 <p>We can ask it about the weather:</p>
                                 <div class="language-python codeBlockContainer_Ckt0 theme-code-block"
                                    style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                    <div class="codeBlockContent_biex">
                                       <pre tabindex="0"
                                          class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">agent_executor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">invoke</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;input&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;what is the weather in SF?&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre>
                                       <div class="buttonGroup__atx"><button type="button"
                                             aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span
                                                class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24"
                                                   class="copyButtonIcon_y97N">
                                                   <path fill="currentColor"
                                                      d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                   </path>
                                                </svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS">
                                                   <path fill="currentColor"
                                                      d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                   </path>
                                                </svg></span></button></div>
                                    </div>
                                 </div>
                                 <p>We can have conversations with it:</p>
                                 <div class="language-python codeBlockContainer_Ckt0 theme-code-block"
                                    style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                    <div class="codeBlockContent_biex">
                                       <pre tabindex="0"
                                          class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">chat_history </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">HumanMessage</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">content</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Can LangSmith help test my LLM applications?&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> AIMessage</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">content</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Yes!&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">agent_executor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">invoke</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;chat_history&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> chat_history</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;input&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Tell me how&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre>
                                       <div class="buttonGroup__atx"><button type="button"
                                             aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span
                                                class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24"
                                                   class="copyButtonIcon_y97N">
                                                   <path fill="currentColor"
                                                      d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                   </path>
                                                </svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS">
                                                   <path fill="currentColor"
                                                      d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                   </path>
                                                </svg></span></button></div>
                                    </div>
                                 </div>
                                 <h3 class="anchor anchorWithStickyNavbar_LWe7" id="diving-deeper-2">Diving Deeper<a
                                       href="#diving-deeper-2" class="hash-link"
                                       aria-label="Direct link to Diving Deeper"
                                       title="Direct link to Diving Deeper">‚Äã</a></h3>
                                 <p>We&#x27;ve now successfully set up a basic agent. We only touched on the basics of
                                    agents - for a deeper dive into everything mentioned here, see <a
                                       href="/docs/modules/agents">this section of documentation</a>.</p>
                                 <h2 class="anchor anchorWithStickyNavbar_LWe7" id="serving-with-langserve">Serving with
                                    LangServe<a href="#serving-with-langserve" class="hash-link"
                                       aria-label="Direct link to Serving with LangServe"
                                       title="Direct link to Serving with LangServe">‚Äã</a></h2>
                                 <p>Now that we&#x27;ve built an application, we need to serve it. That&#x27;s where
                                    LangServe comes in.
                                    LangServe helps developers deploy LangChain chains as a REST API. You do not need to
                                    use LangServe to use LangChain, but in this guide we&#x27;ll show how you can deploy
                                    your app with LangServe.</p>
                                 <p>While the first part of this guide was intended to be run in a Jupyter Notebook, we
                                    will now move out of that. We will be creating a Python file and then interacting
                                    with it from the command line.</p>
                                 <p>Install with:</p>
                                 <div class="language-bash codeBlockContainer_Ckt0 theme-code-block"
                                    style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                    <div class="codeBlockContent_biex">
                                       <pre tabindex="0"
                                          class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">pip </span><span class="token function" style="color:rgb(0, 0, 255)">install</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;langserve[all]&quot;</span><br></span></code></pre>
                                       <div class="buttonGroup__atx"><button type="button"
                                             aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span
                                                class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24"
                                                   class="copyButtonIcon_y97N">
                                                   <path fill="currentColor"
                                                      d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                   </path>
                                                </svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS">
                                                   <path fill="currentColor"
                                                      d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                   </path>
                                                </svg></span></button></div>
                                    </div>
                                 </div>
                                 <h3 class="anchor anchorWithStickyNavbar_LWe7" id="server">Server<a href="#server"
                                       class="hash-link" aria-label="Direct link to Server"
                                       title="Direct link to Server">‚Äã</a></h3>
                                 <p>To create a server for our application we&#x27;ll make a <code>serve.py</code> file.
                                    This will contain our logic for serving our application. It consists of three
                                    things:</p>
                                 <ol>
                                    <li>The definition of our chain that we just built above</li>
                                    <li>Our FastAPI app</li>
                                    <li>A definition of a route from which to serve the chain, which is done with
                                       <code>langserve.add_routes</code></li>
                                 </ol>
                                 <div class="language-python codeBlockContainer_Ckt0 theme-code-block"
                                    style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                    <div class="codeBlockContent_biex">
                                       <pre tabindex="0"
                                          class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">#!/usr/bin/env python</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> typing </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> List</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> fastapi </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> FastAPI</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain_core</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">prompts </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> ChatPromptTemplate</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain_openai </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> ChatOpenAI</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain_community</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">document_loaders </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> WebBaseLoader</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain_openai </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> OpenAIEmbeddings</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain_community</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">vectorstores </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> FAISS</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">text_splitter </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> RecursiveCharacterTextSplitter</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">tools</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">retriever </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> create_retriever_tool</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain_community</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">tools</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">tavily_search </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> TavilySearchResults</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain_openai </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> ChatOpenAI</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> hub</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">agents </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> create_openai_functions_agent</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">agents </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> AgentExecutor</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">pydantic_v1 </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> BaseModel</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> Field</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain_core</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">messages </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> BaseMessage</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langserve </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> add_routes</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># 1. Load Retriever</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">loader </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> WebBaseLoader</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;https://docs.smith.langchain.com/overview&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">docs </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> loader</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">load</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">text_splitter </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> RecursiveCharacterTextSplitter</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">documents </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> text_splitter</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">split_documents</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">docs</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">embeddings </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> OpenAIEmbeddings</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">vector </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> FAISS</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">from_documents</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">documents</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> embeddings</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">retriever </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> vector</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">as_retriever</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># 2. Create Tools</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">retriever_tool </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> create_retriever_tool</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    retriever</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;langsmith_search&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Search for information about LangSmith. For any questions about LangSmith, you must use this tool!&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">search </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> TavilySearchResults</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">tools </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">retriever_tool</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> search</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># 3. Create Agent</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">prompt </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> hub</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">pull</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;hwchase17/openai-functions-agent&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">llm </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> ChatOpenAI</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">model</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;gpt-3.5-turbo&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> temperature</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">agent </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> create_openai_functions_agent</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">llm</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> tools</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> prompt</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">agent_executor </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> AgentExecutor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">agent</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">agent</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> tools</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">tools</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> verbose</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token boolean">True</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># 4. App definition</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">app </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> FastAPI</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  title</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;LangChain Server&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  version</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;1.0&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  description</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;A simple API server using LangChain&#x27;s Runnable interfaces&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># 5. Adding chain route</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># We need to add these input/output schemas because the current AgentExecutor</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># is lacking in schemas.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Input</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">BaseModel</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token builtin" style="color:rgb(0, 112, 193)">input</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(0, 112, 193)">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    chat_history</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> List</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">BaseMessage</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> Field</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        extra</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;widget&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;type&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;chat&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;input&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;location&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Output</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">BaseModel</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    output</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(0, 112, 193)">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">add_routes</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    app</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    agent_executor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">with_types</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">input_type</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Input</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> output_type</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">Output</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    path</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;/agent&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">if</span><span class="token plain"> __name__ </span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;__main__&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> uvicorn</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    uvicorn</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">run</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">app</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> host</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;localhost&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> port</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">8000</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre>
                                       <div class="buttonGroup__atx"><button type="button"
                                             aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span
                                                class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24"
                                                   class="copyButtonIcon_y97N">
                                                   <path fill="currentColor"
                                                      d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                   </path>
                                                </svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS">
                                                   <path fill="currentColor"
                                                      d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                   </path>
                                                </svg></span></button></div>
                                    </div>
                                 </div>
                                 <p>And that&#x27;s it! If we execute this file:</p>
                                 <div class="language-bash codeBlockContainer_Ckt0 theme-code-block"
                                    style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                    <div class="codeBlockContent_biex">
                                       <pre tabindex="0"
                                          class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">python serve.py</span><br></span></code></pre>
                                       <div class="buttonGroup__atx"><button type="button"
                                             aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span
                                                class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24"
                                                   class="copyButtonIcon_y97N">
                                                   <path fill="currentColor"
                                                      d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                   </path>
                                                </svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS">
                                                   <path fill="currentColor"
                                                      d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                   </path>
                                                </svg></span></button></div>
                                    </div>
                                 </div>
                                 <p>we should see our chain being served at localhost:8000.</p>
                                 <h3 class="anchor anchorWithStickyNavbar_LWe7" id="playground">Playground<a
                                       href="#playground" class="hash-link" aria-label="Direct link to Playground"
                                       title="Direct link to Playground">‚Äã</a></h3>
                                 <p>Every LangServe service comes with a simple built-in UI for configuring and invoking
                                    the application with streaming output and visibility into intermediate steps.
                                    Head to http://localhost:8000/agent/playground/ to try it out! Pass in the same
                                    question as before - &quot;how can langsmith help with testing?&quot; - and it
                                    should respond same as before.</p>
                                 <h3 class="anchor anchorWithStickyNavbar_LWe7" id="client">Client<a href="#client"
                                       class="hash-link" aria-label="Direct link to Client"
                                       title="Direct link to Client">‚Äã</a></h3>
                                 <p>Now let&#x27;s set up a client for programmatically interacting with our service. We
                                    can easily do this with the
                                    <code>[langserve.RemoteRunnable](/docs/langserve#client)</code>.
                                    Using this, we can interact with the served chain as if it were running client-side.
                                 </p>
                                 <div class="language-python codeBlockContainer_Ckt0 theme-code-block"
                                    style="--prism-color:#000000;--prism-background-color:#F5F5F5">
                                    <div class="codeBlockContent_biex">
                                       <pre tabindex="0"
                                          class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langserve </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> RemoteRunnable</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">remote_chain </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> RemoteRunnable</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;http://localhost:8000/agent/&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">remote_chain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">invoke</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;input&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;how can langsmith help with testing?&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre>
                                       <div class="buttonGroup__atx"><button type="button"
                                             aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span
                                                class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24"
                                                   class="copyButtonIcon_y97N">
                                                   <path fill="currentColor"
                                                      d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                   </path>
                                                </svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS">
                                                   <path fill="currentColor"
                                                      d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                   </path>
                                                </svg></span></button></div>
                                    </div>
                                 </div>
                                 <p>To learn more about the many other features of LangServe <a
                                       href="/docs/langserve">head here</a>.</p>
                                 <h2 class="anchor anchorWithStickyNavbar_LWe7" id="next-steps">Next steps<a
                                       href="#next-steps" class="hash-link" aria-label="Direct link to Next steps"
                                       title="Direct link to Next steps">‚Äã</a></h2>
                                 <p>We&#x27;ve touched on how to build an application with LangChain, how to trace it
                                    with LangSmith, and how to serve it with LangServe.
                                    There are a lot more features in all three of these than we can cover here.
                                    To continue on your journey, we recommend you read the following (in order):</p>
                                 <ul>
                                    <li>All of these features are backed by <a
                                          href="/docs/expression_language">LangChain Expression Language (LCEL)</a> - a
                                       way to chain these components together. Check out that documentation to better
                                       understand how to create custom chains.</li>
                                    <li><a href="/docs/modules/model_io">Model IO</a> covers more details of prompts,
                                       LLMs, and output parsers.</li>
                                    <li><a href="/docs/modules/data_connection">Retrieval</a> covers more details of
                                       everything related to retrieval</li>
                                    <li><a href="/docs/modules/agents">Agents</a> covers details of everything related
                                       to agents</li>
                                    <li>Explore common <a href="/docs/use_cases/">end-to-end use cases</a> and <a
                                          href="/docs/templates">template applications</a></li>
                                    <li><a href="/docs/langsmith/">Read up on LangSmith</a>, the platform for debugging,
                                       testing, monitoring and more</li>
                                    <li>Learn more about serving your applications with <a
                                          href="/docs/langserve">LangServe</a></li>
                                 </ul>
                              </div>
                           </article>
                           <nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a
                                 class="pagination-nav__link pagination-nav__link--prev"
                                 href="/docs/get_started/installation">
                                 <div class="pagination-nav__sublabel">Previous</div>
                                 <div class="pagination-nav__label">Installation</div>
                              </a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/security">
                                 <div class="pagination-nav__sublabel">Next</div>
                                 <div class="pagination-nav__label">Security</div>
                              </a></nav>
                        </div>
                     </div>
                     <div class="col col--3">
                        <div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop">
                           <ul class="table-of-contents table-of-contents__left-border">
                              <li><a href="#setup" class="table-of-contents__link toc-highlight">Setup</a>
                                 <ul>
                                    <li><a href="#jupyter-notebook"
                                          class="table-of-contents__link toc-highlight">Jupyter Notebook</a></li>
                                    <li><a href="#installation"
                                          class="table-of-contents__link toc-highlight">Installation</a></li>
                                    <li><a href="#langsmith" class="table-of-contents__link toc-highlight">LangSmith</a>
                                    </li>
                                 </ul>
                              </li>
                              <li><a href="#building-with-langchain"
                                    class="table-of-contents__link toc-highlight">Building with LangChain</a></li>
                              <li><a href="#llm-chain" class="table-of-contents__link toc-highlight">LLM Chain</a>
                                 <ul>
                                    <li><a href="#diving-deeper" class="table-of-contents__link toc-highlight">Diving
                                          Deeper</a></li>
                                 </ul>
                              </li>
                              <li><a href="#retrieval-chain" class="table-of-contents__link toc-highlight">Retrieval
                                    Chain</a>
                                 <ul>
                                    <li><a href="#diving-deeper-1" class="table-of-contents__link toc-highlight">Diving
                                          Deeper</a></li>
                                 </ul>
                              </li>
                              <li><a href="#conversation-retrieval-chain"
                                    class="table-of-contents__link toc-highlight">Conversation Retrieval Chain</a></li>
                              <li><a href="#agent" class="table-of-contents__link toc-highlight">Agent</a>
                                 <ul>
                                    <li><a href="#diving-deeper-2" class="table-of-contents__link toc-highlight">Diving
                                          Deeper</a></li>
                                 </ul>
                              </li>
                              <li><a href="#serving-with-langserve"
                                    class="table-of-contents__link toc-highlight">Serving with LangServe</a>
                                 <ul>
                                    <li><a href="#server" class="table-of-contents__link toc-highlight">Server</a></li>
                                    <li><a href="#playground"
                                          class="table-of-contents__link toc-highlight">Playground</a></li>
                                    <li><a href="#client" class="table-of-contents__link toc-highlight">Client</a></li>
                                 </ul>
                              </li>
                              <li><a href="#next-steps" class="table-of-contents__link toc-highlight">Next steps</a>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div>
            </main>
         </div>
      </div>
      <footer class="footer">
         <div class="container container-fluid">
            <div class="row footer__links">
               <div class="col footer__col">
                  <div class="footer__title">Community</div>
                  <ul class="footer__items clean-list">
                     <li class="footer__item"><a href="https://discord.gg/cU2adEyC7w" target="_blank"
                           rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5"
                              aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU">
                              <path fill="currentColor"
                                 d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z">
                              </path>
                           </svg></a></li>
                     <li class="footer__item"><a href="https://twitter.com/LangChainAI" target="_blank"
                           rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5"
                              aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU">
                              <path fill="currentColor"
                                 d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z">
                              </path>
                           </svg></a></li>
                  </ul>
               </div>
               <div class="col footer__col">
                  <div class="footer__title">GitHub</div>
                  <ul class="footer__items clean-list">
                     <li class="footer__item"><a href="https://github.com/langchain-ai/langchain" target="_blank"
                           rel="noopener noreferrer" class="footer__link-item">Python<svg width="13.5" height="13.5"
                              aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU">
                              <path fill="currentColor"
                                 d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z">
                              </path>
                           </svg></a></li>
                     <li class="footer__item"><a href="https://github.com/langchain-ai/langchainjs" target="_blank"
                           rel="noopener noreferrer" class="footer__link-item">JS/TS<svg width="13.5" height="13.5"
                              aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU">
                              <path fill="currentColor"
                                 d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z">
                              </path>
                           </svg></a></li>
                  </ul>
               </div>
               <div class="col footer__col">
                  <div class="footer__title">More</div>
                  <ul class="footer__items clean-list">
                     <li class="footer__item"><a href="https://langchain.com" target="_blank" rel="noopener noreferrer"
                           class="footer__link-item">Homepage<svg width="13.5" height="13.5" aria-hidden="true"
                              viewBox="0 0 24 24" class="iconExternalLink_nPIU">
                              <path fill="currentColor"
                                 d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z">
                              </path>
                           </svg></a></li>
                     <li class="footer__item"><a href="https://blog.langchain.dev" target="_blank"
                           rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5"
                              aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU">
                              <path fill="currentColor"
                                 d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z">
                              </path>
                           </svg></a></li>
                  </ul>
               </div>
            </div>
            <div class="footer__bottom text--center">
               <div class="footer__copyright">Copyright ¬© 2024 LangChain, Inc.</div>
            </div>
         </div>
      </footer>
   </div>
   <script src="/assets/js/runtime~main.4eb2bc1e.js"></script>
   <script src="/assets/js/main.16c4cdcb.js"></script>
</body>

</html>